/**
 * This file contains styles specific to Pi.
 */

html body.pi {
  .saypi-credit-notification {
    color: rgb(107, 98, 85);
  }

  /* Pi-specific polish for user instruction pills */
  .user-prompt.with-instructions {
    /* Expanded panel keeps a slightly softer radius on Pi */
    &:not(.collapsed) .instruction-block {
      border-radius: 12px;           /* keep Pi’s radius, rely on shared grid */
      /* Match discover-card bg + chrome for consistency with collapsed */
      background-color: rgba(255, 255, 255, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.85);
      box-shadow:
        0 2px 10px rgba(13, 60, 38, 0.06),
        0 1px 0 rgba(255, 255, 255, 0.65) inset;
    }

    /* Collapsed pill: render as its own line above the text, with Pi-like rounding */
    &.collapsed {
      .instruction-block {
        /* rely on shared grid behavior */
        width: fit-content;          /* shrink to label */
        max-width: min(68ch, 92%);
        padding: 3px 10px;           /* compact */
        min-height: 0;               /* avoid tall blocks */
        margin: 4px 0 8px 0;         /* subtle separation */
        border-radius: 14px;         /* Pi’s softer radii */
        margin-right: 0;
        vertical-align: baseline;
        font-size: 0.86em;           /* slightly smaller than body */
        line-height: 1.15;           /* tighten vertical rhythm */
      }

      .instruction-label { gap: 6px; line-height: 1.15; }
      .steer-icon-container svg.steer-icon { width: 15px; height: 15px; stroke-width: 1.6; }
    }
  }

  /* Pi-specific radius/density for assistant maintenance pill */
  .maintenance-message.silenced {
    .instruction-block {
      border-radius: 14px;        /* match user-pill radius */
      padding: 5px 12px;          /* slightly tighter */
      line-height: 1.15;
      font-size: 0.9em;
    }
    .instruction-block .thinking-icon-container svg.thinking-icon { width: 16px; height: 16px; stroke-width: 1.6; }
  }

  /* Discover-card inspired chrome for pills (user + assistant) */
  .user-prompt.with-instructions.collapsed .instruction-block,
  .maintenance-message.silenced .instruction-block {
    /* Light card feel: soft bg, subtle white border, soft shadow */
    background-color: rgba(255, 255, 255, 0.55);
    border: 1px solid rgba(255, 255, 255, 0.85);
    box-shadow:
      0 2px 10px rgba(13, 60, 38, 0.06),  /* faint greenish ambient */
      0 1px 0 rgba(255, 255, 255, 0.65) inset; /* inner highlight */
    transition: transform 120ms ease, box-shadow 160ms ease, background-color 120ms ease;
  }
  @media (hover: hover) {
    .user-prompt.with-instructions.collapsed .instruction-block:hover,
    .maintenance-message.silenced .instruction-block:hover {
      transform: translateY(-0.5px);
      background-color: rgba(255, 255, 255, 0.66);
      box-shadow:
        0 4px 16px rgba(13, 60, 38, 0.08),
        0 1px 0 rgba(255, 255, 255, 0.7) inset;
    }
  }

  /* Agent notice width to match Pi's prompt composer */
  .saypi-agent-notice {
    max-width: 750px;  /* Desktop width matching prompt composer */
    margin-left: auto;
    margin-right: auto;
  }

  /* Mobile responsive width for smaller devices */
  @media (max-width: 768px) {
    .saypi-agent-notice {
      max-width: 350px;  /* Mobile width matching prompt composer */
    }
  }

  /* Call button positioning for new chat input element */
  /* On new chat pages, Pi uses an input element with inline flex styling */
  /* The call button needs consistent positioning regardless of input vs textarea */
  #saypi-callButton {
    /* Ensure button stays properly positioned next to both input and textarea */
    align-self: center;
  }

  /* Sidebar menu button styling to match Pi's native buttons */
  #saypi-side-panel {
    /* Match Pi's sidebar menu button text styling */
    .immersive-mode-button,
    .settings-button {
      span {
        font-family: var(--font-oracle), ui-sans-serif, system-ui, -apple-system,
          BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
          'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
          'Segoe UI Symbol', 'Noto Color Emoji';
        font-size: 16px;
        font-style: normal;
        font-weight: 400;
        line-height: 140%;
        letter-spacing: -0.16px;
        color: var(--base-text-secondary, #6b6255);
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Override icon stroke/fill colors from black to brown */
      svg {
        stroke: rgb(107, 98, 85);
      }
    }
  }
}
