<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="extensionPopupTitle">Say, Pi Settings</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="toggle.css" />
    <link rel="stylesheet" href="language-picker.css" />
    <link rel="stylesheet" href="status.css" />
    <link rel="stylesheet" href="consent.css" />
    <link rel="stylesheet" href="preferences.css" />
    <link rel="stylesheet" href="usage.css" />
    <link rel="stylesheet" href="beta.css" />
    <link rel="stylesheet" href="tabs.css" />
    <style>
      body {
        flex-wrap: wrap;
      }
      .hidden {
        display: none !important;
      }
      .user-preference-item,
      .usage-charges-item {
        display: flex;
        align-items: center;
        width: 504px;
        padding: 0.5rem 1rem;
        align-content: space-between;
      }
      .control {
        margin-left: auto; /* align right */
      }
      .description {
        font-size: 0.875rem; /* Smaller font size for descriptions */
        color: #4a5568; /* Gray color for descriptions */
        margin-top: 0.25rem; /* Small margin above the description */
      }
    </style>
  </head>
  <body class="flex items-center justify-center">
    <!-- Header banner with auth/greeting -->
    <header class="settings-header">
      <div id="profile" class="profile-banner">
        <div class="flex items-center w-full">
          <a href="https://www.saypi.ai" id="saypi-logo-link" title="Open Say, Pi Dashboard" target="_blank">
            <img class="logo mr-2" src="../icons/bubble-green.svg" alt="Say, Pi" />
          </a>
          <div class="flex items-center flex-grow">
            <span class="label-text hidden" data-i18n="profile">Profile</span>
            <span id="profile-status" class="ml-2 text-sm text-gray-600" data-i18n="notSignedIn">Not signed in</span>
            <span id="profile-name" class="ml-2 text-normal hidden"></span>
            <span class="header-divider" aria-hidden="true"></span>
            <span id="unauthenticated-message" class="unauthenticated-inline hidden" data-i18n="quotaUnauthenticatedMessage">Log in to access voice generation and other premium features</span>
          </div>
          <button id="auth-button" class="control px-4 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-i18n="signIn">Sign In</button>
        </div>
      </div>
    </header>

    <div class="settings-container">
      <nav class="sidebar">
        <button class="tab-button active" data-tab="general">General</button>
        <button class="tab-button" data-tab="chat">AI Chat</button>
        <button class="tab-button" data-tab="dictation">Dictation</button>
        <button class="tab-button" data-tab="about">About</button>
      </nav>
      <main class="content">
        <!-- General -->
        <section id="tab-general" class="tab-panel">
          <h2 class="panel-heading">General</h2>
          <div class="user-preference-item w-full max-w-lg" id="sounds-effects-preference">
            <label class="wraper" for="sound-effects">
              <span class="label-text" data-i18n="soundEffects">Sound Effects</span>
              <div class="switch-wrap control">
                <input type="checkbox" id="sound-effects" name="soundEffects" />
                <div class="switch"></div>
              </div>
            </label>
          </div>

          <div class="user-preference-item w-full max-w-lg" id="analytics-consent-preference-item">
            <label class="wraper" for="share-data">
              <span class="label-text" data-i18n="shareAnalytics">Share analytics</span>
              <div class="switch-wrap control">
                <input type="checkbox" id="share-data" name="shareAnalytics" />
                <div class="switch"></div>
              </div>
            </label>
          </div>

          <!-- Premium / quotas -->
          <section id="premium-status">
            <div class="quota-progress tts">
              <div class="progress-label">
                <span class="label" data-i18n="ttsQuotaRemaining">Voice Generation</span>
                <span class="value" style="display: none;">
                  <span id="tts-quota-remaining-value" class="quota-remaining-value">0</span>
                  <span data-i18n="ttsQuotaCharacters">characters</span>
                </span>
              </div>
              <div class="progress-bar">
                <div class="share used"></div>
                <div class="share remaining"></div>
              </div>
              <div class="text-xs text-gray-500 text-right mt-1 quota-percentage"></div>
            </div>
            <div class="quota-progress mt-2 stt">
              <div class="progress-label">
                <span class="label" data-i18n="sttQuotaRemaining">Speech Recognition</span>
                <span class="value" style="display: none;">
                  <span id="stt-quota-remaining-value" class="quota-remaining-value">0</span>
                  <span data-i18n="sttQuotaSeconds">seconds</span>
                </span>
              </div>
              <div class="progress-bar">
                <div class="share used"></div>
                <div class="share remaining"></div>
              </div>
              <div class="text-xs text-gray-500 text-right mt-1 quota-percentage"></div>
            </div>
            <div class="flex justify-between items-center mt-2 quota-footer">
              <a id="view-quota-details" class="view-details" data-i18n="viewDetails" href="#">View details</a>
              <span id="quota-reset-date" class="reset-date text-xs text-gray-500"></span>
            </div>
          </section>

          <section id="upgrade" class="hidden">
            <div class="flex items-center justify-center w-full max-w-lg">
              <button id="upgrade-button" class="px-4 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-i18n="upgradeButton">Upgrade Plan</button>
            </div>
          </section>

          <section id="devtools" class="hidden">
            <div class="user-preference-item w-full max-w-lg x-hidden">
              <button type="button" id="clear-preferences" class="btn btn-primary">Clear Preferences</button>
            </div>
          </section>

          <!-- Consent overlay lives here to keep DOM simple -->
          <section id="analytics-consent" class="hidden">
            <h1 data-i18n="consentBetterTogether">Let's improve Say, Pi together</h1>
            <p data-i18n="consentSharingPurpose">Sharing your usage data will help us understand how people use Say, Pi so we can make it better for everyone.</p>
            <ul>
              <li data-i18n="consentNoPii">We won't collect or see personal data, like messages or names.</li>
              <li data-i18n="consentPrivacyParamount">Your privacy is paramount. Anything you say remains between you and Pi.</li>
              <li data-i18n="consentDataDeidentified">Analytics are not tied to individuals. Any data used is de-identified.</li>
              <li data-i18n="consentNoSale">We won't sell your data to third parties, or use it for advertising.</li>
              <li data-i18n="consentRightToRevoke">You can change your mind at any time.</li>
            </ul>
            <a href="https://www.saypi.ai/privacy-policy" target="_blank" rel="noopener" data-i18n="consentPrivacyPolicy">Read our Privacy Policy</a>
            <h2 data-i18n="consentAskParticipate">Would you like to participate?</h2>
            <div class="buttons">
              <button id="opt-out" type="button" class="btn btn-primary" data-i18n="consentOptOut">No thanks</button>
              <button id="opt-in" type="button" class="btn btn-primary" data-i18n="consentOptIn">I'm in!</button>
            </div>
          </section>
        </section>

        <!-- AI Chat -->
        <section id="tab-chat" class="tab-panel hidden">
          <h2 class="panel-heading">AI Chat</h2>
          <div id="submit-mode-selector" class="w-full max-w-lg user-preference-item mode-selector">
            <div>
              <div class="flex justify-between mb-2">
                <span role="img" class="icon text-2xl" aria-label="Rocket" slider-value="0" id="auto">üöÄ</span>
                <span role="img" class="icon text-2xl" aria-label="Robot" slider-value="1" id="agent">ü§ñ</span>
                <span role="img" class="icon text-2xl" aria-label="Hand" slider-value="2" id="off">üñêÔ∏è</span>
              </div>
              <input type="range" min="0" max="2" value="0" class="slider w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer" id="submitModeRange" data-i18n-attr="title:submitModeControl" title="Select when to submit your messages" />
            </div>
            <div id="submitModeValue" class="mt-2 text-lg font-semibold text-gray-700" data-i18n="submit_mode_auto">auto</div>
            <div class="description" data-i18n="submit_mode_auto_description">Automatically submit when you stop speaking</div>
            <div class="description" data-i18n="submit_mode_agent_description">Pi decides when to respond based on context</div>
            <div class="description" data-i18n="submit_mode_off_description">Only submit when you press the button</div>
          </div>

          <div class="user-preference-item w-full max-w-lg" id="nickname-preference">
            <label class="wraper" for="assistant-nickname">
              <span class="label-text" data-i18n="nicknameLabel">Nickname</span>
              <div class="control">
                <input type="text" id="assistant-nickname" name="assistantNickname" class="px-2 py-1 border rounded w-20 text-sm text-right" placeholder="Pi" />
              </div>
            </label>
          </div>

          <div class="user-preference-item w-full max-w-lg" id="allow-interruptions-preference">
            <label class="wraper" for="allow-interruptions">
              <span class="label-text" data-i18n="allowInterruptions">Interruptible</span>
              <div class="switch-wrap control">
                <input type="checkbox" id="allow-interruptions" name="allowInterruptions" />
                <div class="switch"></div>
              </div>
            </label>
          </div>
        </section>

        <!-- Dictation -->
        <section id="tab-dictation" class="tab-panel hidden">
          <h2 class="panel-heading">Dictation</h2>
          <div id="preference-selector" class="w-full max-w-lg user-preference-item mode-selector">
            <div>
              <div class="flex justify-between mb-2">
                <span role="img" class="icon text-2xl" aria-label="Hare" slider-value="0" id="speed">üêá</span>
                <span role="img" class="icon text-2xl active" aria-label="Deer" slider-value="1" id="balanced">ü¶å</span>
                <span role="img" class="icon text-2xl" aria-label="Owl" slider-value="2" id="accuracy">ü¶â</span>
              </div>
              <input type="range" min="0" max="2" value="1" class="slider w-full h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer" id="customRange" data-i18n-attr="title:preferedModeControl" title="Select your preferred mode" />
            </div>
            <div id="sliderValue" class="mt-2 text-lg font-semibold text-gray-700" data-i18n="mode_balanced">balanced</div>
            <div class="description" data-i18n="mode_speed_description">Fastest response, but less accurate and may interrupt speech</div>
            <div class="description" data-i18n="mode_balanced_description">Good balance of speed and accuracy for most uses</div>
            <div class="description" data-i18n="mode_accuracy_description">Highest accuracy, but slower transcription speed</div>
          </div>

          <div class="user-preference-item w-full max-w-lg" id="language-preference">
            <div id="language-picker" class="language-picker user-preference language-picker--hide-label js-language-picker" data-trigger-class="li4-btn li4-btn--subtle js-tab-focus">
              <label for="language-picker-select" class="label-text" data-i18n="preferedLanguage">Language</label>
              <form action="" class="language-picker__form">
                <select name="language-picker-select" id="language-picker-select">
                  <option lang="ar" value="arabic">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                  <option lang="bg" value="bulgarian">–ë—ä–ª–≥–∞—Ä—Å–∫–∏</option>
                  <option lang="zh" value="chinese">‰∏≠Êñá</option>
                  <option lang="hr" value="croatian">Hrvatski</option>
                  <option lang="cs" value="czech">ƒåe≈°tina</option>
                  <option lang="da" value="danish">Dansk</option>
                  <option lang="nl" value="dutch">Nederlands</option>
                  <option lang="en" value="english">English</option>
                  <option lang="tl" value="filipino">Filipino</option>
                  <option lang="fi" value="finnish">Suomi</option>
                  <option lang="fr" value="francais">Fran√ßais</option>
                  <option lang="de" value="deutsch">Deutsch</option>
                  <option lang="el" value="greek">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</option>
                  <option lang="hi" value="hindi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                  <option lang="id" value="indonesian">Bahasa Indonesia</option>
                  <option lang="it" value="italiano">Italiano</option>
                  <option lang="ja" value="japanese">Êó•Êú¨Ë™û</option>
                  <option lang="ko" value="korean">ÌïúÍµ≠Ïñ¥</option>
                  <option lang="ms" value="malay">Bahasa Melayu</option>
                  <option lang="pl" value="polish">Polski</option>
                  <option lang="pt" value="portuguese">Portugu√™s</option>
                  <option lang="ro" value="romanian">Rom√¢nƒÉ</option>
                  <option lang="ru" value="russian">–†—É—Å—Å–∫–∏–π</option>
                  <option lang="sk" value="slovak">Slovenƒçina</option>
                  <option lang="es" value="espanol">Espa√±ol</option>
                  <option lang="sv" value="swedish">Svenska</option>
                  <option lang="ta" value="tamil">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                  <option lang="tr" value="turkish">T√ºrk√ße</option>
                  <option lang="uk" value="ukrainian">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                  <option lang="" value="global">Auto-detect</option>
                </select>
              </form>
            </div>
          </div>

          <div class="user-preference-item w-full max-w-lg" id="vad-status-indicator-preference">
            <label class="wraper" for="vad-status-indicator-enabled">
              <span class="label-text" data-i18n="vadStatusIndicatorEnabledLabel">Show VAD Status</span>
              <div class="switch-wrap control">
                <input type="checkbox" id="vad-status-indicator-enabled" name="vadStatusIndicatorEnabled" />
                <div class="switch"></div>
              </div>
            </label>
          </div>

          <div class="user-preference-item w-full max-w-lg" id="remove-filler-words-preference">
            <label class="wraper" for="remove-filler-words" data-i18n-attr="title:removeFillerWordsTooltip">
              <span class="label-text" data-i18n="removeFillerWordsLabel">Remove filler words (beta)</span>
              <div class="switch-wrap control">
                <input type="checkbox" id="remove-filler-words" name="removeFillerWords" />
                <div class="switch"></div>
              </div>
            </label>
          </div>
        </section>

        <!-- About -->
        <section id="tab-about" class="tab-panel hidden">
          <h2 class="panel-heading">About</h2>
          <section id="application-status">
            <div class="status-container">
              <div class="status">
                <p class="message unknown" data-i18n="checkingApplicationStatus">Checking on our servers...</p>
              </div>
            </div>
          </section>
          <section id="application-status-detail" class="hidden issue" />
        </section>
      </main>
    </div>

    <script src="../../public/lucide.min.js"></script>
    <script src="tabs.js"></script>
    <script src="popup-config.js"></script>
    <script src="simple-user-agent.js"></script>
    <script src="language-picker.js"></script>
    <script src="auth-shared.js"></script>
    <script src="auth.js"></script>
    <script src="popup.js"></script>
    <script src="status.js"></script>
    <script src="status-subscription.js"></script>
  </body>
</html>
